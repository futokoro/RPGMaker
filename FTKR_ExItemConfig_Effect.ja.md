[トップページに戻る](README.md)

# [FTKR_ExItemConfig_Effect](FTKR_ExItemConfig_Effect.js) プラグイン

アイテムとスキルの使用効果を拡張するプラグインです。<br>
本プラグインは、FTKR_SkillExpansion.jsと組み合わせて使用できません。

ダウンロード: [FTKR_ExItemConfig_Effect.js](https://raw.githubusercontent.com/futokoro/RPGMaker/master/FTKR_ExItemConfig_Effect.js)

## 目次

以下の項目の順でプラグインの使い方を説明します。
1. [概要](#概要)
2. [プラグインの登録](#プラグインの登録)
3. [使用効果の設定](#使用効果の設定)
* [プラグインの更新履歴](#プラグインの更新履歴)
* [ライセンス](#ライセンス)

## 概要

本プラグインを実装することで、アイテムやスキルの使用効果をより詳細に設定できます。

1. 使用効果の対象を変更できます。
2. 使用効果の効果量にJS計算式が使用できます。
3. 使用効果が発生させるための有効条件を設定できます。

## プラグインの登録

以下のプラグインと組み合わせて使用する場合は、プラグイン管理画面で、以下の順の配置になるように登録してください。
```
YEP_BattleEngineCore.js
FTKR_ExItemConfig_Effect.js
```

## 使用効果の設定
スキルに以下のノートタグを追記することで、使用効果の設定を変更できます。

```
<EIC 使用効果: x>
code
</EIC 使用効果>
```
使用効果のId x に対して code部で記述した設定を反映します。
使用効果のIDは、使用効果欄に設定した順番に上から 0, 1,...となります。

### code に使用できる項目
```
Target: y
対象: y
```
使用効果の対象を、y に変えることができます。
y に使用できるコードは以下の通りです。
* user - 使用者
* randomFriends - 味方からランダムで1体選択
* randomOpponents - 敵からランダムで1体選択

```
Value1: eval
内容1: 計算式
```
使用効果の内容1を 計算式(eval) で設定した値に変更します。
内容1は、使用効果で1つめに設定した数値です。<br>
 例) HP回復の場合、% で設定する値

```
Value2: eval
内容2: 計算式
```
使用効果の内容2を 計算式(eval) で設定した値に変更します。
内容2は、使用効果で2つめに設定した数値です。<br>
 例) HP回復の場合、+ で設定する値

```
Enabled: eval
有効条件: 計算式
```
対象の使用効果ID を 計算式(eval) で設定した条件で有効にします。設定しない場合は、常に有効です。
有効になっていない場合は、効果が発生しません。

### 計算式(eval)の値について
計算式は、ダメージ計算式のように、計算式を入力することで、固定値以外の値を
使用することができます。以下のコードを使用できます。負の値入力可。
* a.param  - 使用者のパラメータを参照します。(a.atk で使用者の攻撃力)
* b.param  - 対象のパラメータを参照します。(b.def で対象の防御力)
* s[x]     - スイッチID x の状態を参照します。
* v[x]     - 変数ID x の値を参照します。
* iv[x]    - アイテムのセルフ変数ID x の値を参照します。(*1)
* result  - スキル・アイテムを使用した結果を参照します。(*2)

(*1) セルフ変数を使用する場合は、FTKR_ItemSelfVariables.jsが必要です。<br>
(*2) result で取得できる値は以下の通り。<br>
* result.hpDamage - HPダメージ
* result.mpDamage - MPダメージ

### 設定例
使用効果の1番目に「HP回復」を追加して、以下のタグを記入することで
スイッチID1またはスイッチID2がONの時に、相手に与えたダメージの20%分、
使用者が回復する効果が発生します。
```
<EIC 使用効果: 0>
対象: user
内容1: 0
内容2: result.hpDamage * 0.2
有効条件: s[1] && s[2]
</EIC 使用効果>
```

[目次に戻る](#目次)

## プラグインの更新履歴

| バージョン | 公開日 | 更新内容 |
| --- | --- | --- |
| [ver1.2.1](FTKR_ExItemConfig_Effect.js) | 2019/05/08 | FTKR_ExStateEffectsの機能で追加した特徴の使用効果が正しく発動しない不具合修正 |
| ver1.2.0 | 2017/08/27 | コモンイベントに有効条件を設定する機能を追加 |
| ver1.1.1 | 2017/08/04 | 不要なコメントを削除 |
| ver1.1.0 | 2017/05/11 | 不具合修正、「EIC 使用効果ID」から「EIC 使用効果」にタグ変更 |
| ver1.0.1 | 2017/04/29 | FTKR_ItemSelfVariables の v1.1.0以降に対応 |
| ver1.0.0 | 2017/04/14 | 初版公開 |

## ライセンス

本プラグインはMITライセンスのもとで公開しています。

[The MIT License (MIT)](https://opensource.org/licenses/mit-license.php)

#
[目次に戻る](#目次)

[トップページに戻る](README.md)
[トップページに戻る](README.md)

# [FTKR_CardGames](FTKR_CardGames.js) プラグイン

ゲーム内でトランプゲームで遊べるプラグインです。

ダウンロード: [FTKR_CardGames.js](https://raw.githubusercontent.com/futokoro/RPGMaker/master/FTKR_CardGames.js)

## 目次

以下の項目の順でプラグインの使い方を説明します。
1. [概要](#概要)
1. [初期設定](#初期設定)
    1. [カード画像の準備](#カード画像の準備)
    1. [カード画像の登録](#カード画像の登録)
    1. [変数およびスイッチの設定](#変数およびスイッチの設定)
    1. [ゲームポイントの設定](#ゲームポイントの設定)
    1. [ゲーム内での設定](#ゲーム内での設定)
1. [カードゲームの遊び方](#カードゲームの遊び方)
    1. [カードゲーム画面を表示する](#カードゲーム画面を表示する)
    1. [プレイヤーの操作](#プレイヤーの操作)
    1. [並び替えコマンドについて](#並び替えコマンドについて)
1. [NPCの設定](#npcの設定)
    1. [特徴に関する内容](#特徴に関する内容)
    1. [表情に関する内容](#表情に関する内容)
    1. [台詞に関する内容](#台詞に関する内容)
    1. [設定例](#設定例)
* [プラグインの更新履歴](#プラグインの更新履歴)
* [ライセンス](#ライセンス)

# 概要

ゲーム中に、以下のトランプゲームで遊べます。

 1. ババ抜き(2～4人まで)

[目次に戻る](#目次)

# 初期設定
カードゲームで遊ぶために、まず以下の設定が必要になります。

## カード画像の準備
カード画像は、以下の仕様のものを各自準備してください。
カード画像は、img/picturesフォルダに保存してください。

### 絵札および数札
***01.png のように、１枚毎に個別に画像を用意します。<br>
*** はカードのスート(マーク)ごとに同じ文字列にしてください。<br>
01 の数字部は、カードのランク(数字)を二桁で記載してください。<br>

### ジョーカーおよび裏面
名前は自由に設定してください。

### ディプロイメント対応について
ディプロイメントで、「未使用ファイルを含まない」を有効にする場合は、絵札および数札のファイル名を、以下にしてください。

* スペード : s01.png ~ s13.png
* クラブ　 : c01.png ~ c13.png
* ハート　 : h01.png ~ h13.png
* ダイヤ　 : d01.png ~ d13.png

[目次に戻る](#目次)

## カード画像の登録
プラグインパラメータに、準備したカード画像を設定します。

### 絵札および数札
各スート毎に、用意した画像のファイル名を以下の形式で設定します。
```
***%1
```
***は画像ファイルの文字列部分
   
### ジョーカーおよび裏面
img/picturesフォルダから選択できます。

[目次に戻る](#目次)

## 変数およびスイッチの設定
当プラグインのゲーム内の設定のいくつかは、ゲーム内変数やスイッチの値を参照するようになっています。

以下のプラグインパラメータに、使用する変数IDやスイッチIDを設定してください。

### 変数の設定
```
Game Count ID
Draw Speed ID
Player 1 ID
Player 1 Result
Player 2 ID
Player 2 Result
Player 3 ID
Player 3 Result
Player 4 ID
Player 4 Result
```

### スイッチの設定
```
Random Start ID
NPC Dialogues ID
NPC Facial Expressions ID
NPC Characteristics ID
```

[目次に戻る](#目次)

## ゲームポイントの設定
以下のプラグインパラメータで設定します。
```
Ranking Points
```
1ゲームで、上がり順に取得するポイントを設定します。<br>
各プレイヤーが取得したポイントは、プラグインパラメータで設定したゲーム内変数に保存します。<br>
複数回のゲームを行うと、ポイントは加算していきます。

[目次に戻る](#目次)

## ゲーム内での設定
この項目で設定するパラメータは、ゲーム内のイベントにて設定してください。

### プレイヤーの設定

以下の、プラグインコマンドでゲームに参加するキャラを設定します。

```
CRD_プレイヤー設定 [プレイヤー1] [プレイヤー2] ...
CRD_SETTING_PLAYER [player1] [player2] ...
```

ゲームに参加するプレイヤーを設定します。<br>
アクターIDを設定してください。(最大4人まで)<br>
-1 を設定すると、パーティーのリーダーキャラになります。<br>
プレイヤー1が操作キャラになります。<br>

### ゲーム数の設定

1セット内で行うゲーム数を設定します。
プラグインパラメータ`Game Count ID`で指定したゲーム変数の値を変更してください。

[目次に戻る](#目次)

# カードゲームの遊び方

## カードゲーム画面を表示する
以下のプラグインコマンドを実行すると、ゲーム画面を表示します。

```
CRD_カードゲーム表示
CRD_OPEN_CARDGAME
```
ゲーム画面を表示して、ゲームを開始します。
設定したゲームの回数の分、プレイすると元の画面に戻ります。

[目次に戻る](#目次)

## プレイヤーの操作

プレイヤー1は操作キャラとして、ゲームに参加します。

相手からカードを引くときは、任意の場所にカーソルを合わせることで好きな位置のカードを引くことが出来ます。

また、引いたカードは手札の任意の場所にセットすることができます。

後述のNPCの特徴により、手札の中の位置に重要になるため配置する場所を考えながらゲームを進めましょう。

[目次に戻る](#目次)

## 並び替えコマンドについて
引いたカードの配置を決めると、ターンを終了するか、並び替えをするか選択できます。

並び替えコマンドを選択すると、再度手札にカーソルが移り手札の配置を変更することができます。

手順は、位置を変えたいカードにカーソルを合わせて決定ボタンを押し、その後移したい場所にカーソルを合わせて、決定ボタンを押します。

この時、同じ場所を選択すると、カードを突き出した状態にすることができます。

[目次に戻る](#目次)

# NPCの設定

プレイヤー1以外に設定されたアクターは、NPCとしてゲームに参加します。

この時、それぞれのアクターのメモ欄に以下のタグを記載することでNPC時に特徴を設定することができます。

### 特徴および表情の場合
```
<CRD_特徴>
内容: 確率
</CRD_特徴>
```

### 台詞の場合
```
<CRD_台詞>
内容: 確率, 台詞
</CRD_台詞>
```

確率は、1～10の値で、10％刻みで内容を実行する確率を設定できます。
台詞は、表示させる文字列を記入してください。
内容には以下の項目があります。

[目次に戻る](#目次)

## 特徴に関する内容
### カードの取り方に関する内容

1. 端を取る　　　　　 - 相手の手札の両端のカードから選びます
2. 端を取らない　　　 - 相手の手札の両端のカードを選びません

3. 中心を取る　　　　 - 相手の手札の中心のカードを選びます
                       (手札が偶数の場合は中心2枚から選ぶ)
4. 中心を取らない　　 - 相手の手札の中心のカードを選びません
                       (手札が偶数の場合は中心2枚を選ばない)

5. 右から取る　　　　 - 相手の手札の中心よりも右側のカードから選びます
6. 左から取る　　　　 - 相手の手札の中心よりも左側のカードから選びます

7. 突き出しを取る　　 - 相手の手札で突き出しているカードを選びます
8. 突き出しを取らない - 相手の手札で突き出しているカードを選びません

### 取ったカードの並べ方に関する内容

1. 端に入れる　　　　 - 自分の手札の両端のどちらかに入れます
2. 端に入れない　　　 - 自分の手札の両端には入れません

3. 中心に入れる　　　 - 自分の手札の中心に入れます
4. 中心に入れない　　 - 自分の手札の中心には入れません

5. 右に入れる　　　　 - 自分の手札の中心よりも右側に入れます
6. 左に入れる　　　　 - 自分の手札の中心よりも左側に入れます

### 手札カードの突き出しに関する内容

1. ジョーカーを突き出す　　 - 手札にジョーカーが有る場合、突き出します
2. ジョーカー以外を突き出す - 手札のジョーカー以外のカードを、突き出します

[目次に戻る](#目次)

## 表情に関する内容

### 一時的な表情の変化に関する内容
この変化は自分のターンが終わると解除されます

1. ジョーカーを引く(x)　　 - ジョーカーを引いた時に顔画像をx番に変えます
2. ジョーカー以外を引く(x) - ジョーカー以外を引いた時に顔画像をx番に変えます
3. ペアができた(x)　　　　 - ペアができた時に顔画像をx番に変えます
4. ペアができない(x)　　　 - ペアができなかった時に顔画像をx番に変えます

### 常時変化する表情に関する内容

1. ジョーカーを持っている(x)　 - ジョーカーを持っている間、顔画像をx番に変えます
2. ジョーカーを持っていない(x) - ジョーカーを持っていない間、顔画像をx番に変えます

[目次に戻る](#目次)

## 台詞に関する内容
この台詞は自分のターンが終わると消去されます

1. ジョーカーを引く　　 - ジョーカーを引いた時に指定の台詞を表示します
2. ジョーカー以外を引く - ジョーカー以外を引いた時に指定の台詞を表示します
3. ペアができた　　　　 - ペアができた時に指定の台詞を表示します
4. ペアができない　　　 - ペアができなかった時に指定の台詞を表示します

[目次に戻る](#目次)

## 設定例
特徴は複数設定することができます。
複数の特徴がある場合は、上から順番に内容を処理します。

例)
```
<CRD_特徴>
端から取る: 7
右から取る: 10
</CRD_特徴>
<CRD_台詞>
ジョーカーを引く: 7,ジョーカーだ！
</CRD_台詞>
```

この場合、NPCのカードの取り方は以下の様になります。
まず、相手の端のカードを取るかどうか判定します。
判定に成功すると、カードを取る対象が２枚に絞られますが、失敗すると、対象はすべてのカードになります。

その後、対象の中の右側に絞ります。(２番目の内容を処理)
「端から取る」に成功している場合、対象は２枚しかないため、その右側、つまり相手の手札の右端のカードが最終的に選ばれます。
失敗している場合は、相手の手札の右側の中からランダムで選ばれます。

また、ジョーカーを引いた時に、7割の確率で台詞を話すようになります。

[目次に戻る](#目次)

## プラグインの更新履歴

| バージョン | 公開日 | 更新内容 |
| --- | --- | --- |
| [ver1.2.1](FTKR_CardGames.js) | 2017/10/02 | NPCの台詞の設定に関するヘルプの誤記修正 |
| ver1.2.0 | 2017/07/29 | カードゲーム中にコモンイベントを実行する機能を追加 |
| ver1.1.1 | 2017/07/22 | カードを配る時とペアを捨てる時にカードに動きをつける機能を追加<br>カードを配る時のSEを設定する機能を追加 |
| ver1.1.0 | 2017/07/19 | カードを引くときと手札に入れる時にカードに動きをつける機能を追加<br>NPCのターンを自動で進めるように変更<br>ターン中のキャラのステータスウィンドウの色を変更する機能を追加<br>２人プレイと、３人プレイの時の配置を見直し<br>ゲーム中のBGMとカードを引くときのSEを設定する機能を追加 |
| ver1.0.2 | 2017/07/11 | ゲームが進行不能になる不具合修正 |
| ver1.0.1 | 2017/07/09 | プラグインコマンドでエラーになる不具合修正 |
| ver1.0.0 | 2017/07/09 | 正式版公開 |

## ライセンス

本プラグインはMITライセンスのもとで公開しています。

[The MIT License (MIT)](https://opensource.org/licenses/mit-license.php)

#
[目次に戻る](#目次)

[トップページに戻る](README.md)
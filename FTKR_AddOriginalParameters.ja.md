[トップページに戻る](README.md)

# [FTKR_AddOriginalParameters](FTKR_AddOriginalParameters.js) プラグイン

オリジナルのパラメータを追加するプラグインです。

ダウンロード: [FTKR_AddOriginalParameters](https://raw.githubusercontent.com/futokoro/RPGMaker/master/FTKR_AddOriginalParameters.js)

## 目次

以下の項目の順でプラグインの使い方を説明します。
1. [概要](#概要)
2. [基本設定](#基本設定)
3. [レベルアップによる成長](#レベルアップによる成長)
4. [装備・ステートによる強化](#装備・ステートによる強化)
5. [パラメータの現在値の増減](#パラメータの現在値の増減)
6. [オリジナルパラメータの用途](#オリジナルパラメータの用途)
7. [スクリプトコマンド](#スクリプトコマンド)
8. [プラグインコマンド](#プラグインコマンド)
* [プラグインの更新履歴](#プラグインの更新履歴)
* [拡張プラグイン](#拡張プラグイン)
* [ライセンス](#ライセンス)

## 概要

本プラグインを使用することで、以下の仕様のオリジナルのパラメータを追加します。

1. 設定したコードを使って、ダメージ計算式に使用できます。
2. アクターのレベルアップで成長させることができます。
3. 装備やステートで強化することができます。
4. アイテムやスキルで値の増減をすることができます。
5. エネミーに対して設定できます。

HPや攻撃力などと同じように使えるパラメータを追加できます。

## 基本設定

以下のプラグインパラメータを設定することで、オリジナルパラメータを、最大10個(*1)まで設定できます。

(*1) 使用できる数は、プラグインパラメータ`Use Param Num`の設定値に従います。

`<Parameter x Code>`

計算式等で使用するコード名を設定します。<br>
参考：最大HPを表す 'mhp' に相当するコード

`<Parameter x Current>`

計算式等で使用する現在値用コード名を設定します。
現在値を使用しない場合は、設定不要です。<br>
参考：現在HPを表す 'hp' に相当するコード

`<Parameter x Max>`

レベルアップや強化によって上昇させることができるパラメータの最大値の設定します。この設定をしない場合は、プラグインパラメータ`<Max Param>`の値を使用します。<br>
参考：HPの場合は、デフォルトで 9999 が最大。

`<Parameter x Min>`

パラメータの最小値の設定します。
現在値を使用する場合は、必ず 1 以上に設定してください。<br>

設定したオリジナルパラメータは、プラグインパラメータ`<Use Param Num>`の値でゲーム内で使用する数を設定します。

[目次に戻る](#目次)

## レベルアップによる成長

アクター、クラス、武器、防具のメモ欄に以下のタグを入力することで、レベルアップでパラメータを成長させることができます。

### レベルが y の時に z 加算する
タグ入力先：アクター、クラス
```
<AOP Param x Level y Value: z (Rand r)>
<AOP 'code' Level y Value: z (Rand r)>
```
アクターのレベルが y の時のパラメータID x (または'code')の増加量を z に設定します。()内を追記した場合、増加量 z に対して ±r のランダム値を付加します。<br>
y が 1 の場合は、初期値を意味します。

入力例) Param 0 の code を str とした場合
```
<AOP str Level 1 Value: 10>
```
パラメータ 0 (str)に対して、初期値を 10 に設定します。

### レベルが y1 から y2 の時に z 加算する
タグ入力先：アクター、クラス
```
<AOP Param x Level y1 To y2 Value: z (Rand r)>
<AOP 'code' Level y1 To y2 Value: z (Rand r)>
```
アクターのレベルが y1 から y2 までの時のパラメータID x (または'code')の増加量を z に設定します。
()内を追記した場合、z に対して ±r のランダム値を付加します。

入力例) Param 0 の code を str とした場合
```
<AOP str Level 2 To 10 Value: 5 Rand 2>
```
パラメータ 0 (str)に対して、Lv2 から Lv10 の間、レベルアップ毎に3～7のランダムな値を加算します。

### 装備による成長
タグ入力先：武器、防具
```
<AOP Param x Grow: y>
<AOP 'code' Grow: y>
```
このタグを設定した武器・防具を装備した状態でレベルが上がると、パラメータ x (または'code')を y 加算します。

### レベルアップによる加算値の補足

1. ランダム値を付加した場合に、増加量は 0 よりも小さな値になることはありません。
2. ランダム値は、ゲーム開始時にすべてのレベル帯の上昇量を決定する仕組みです。
そのため、レベルアップをセーブ/ロードしたとしても、値は変わりません。
3. アクターとクラスの両方で設定した場合は、その合計値になります。

[目次に戻る](#目次)

## 装備・ステートによる強化

武器、防具およびステートのメモ欄に以下のタグを入力することで、装備中またはステート付加中にパラメータを強化させることができます。

### パラメータを加算する
```
<AOP Param x Plus: y>
<AOP 'code' Plus: y>
```
装備中、またはステート付加中、パラメータ x (または'code')に、y 加算します。
y に負の数字を入れた場合、減算します。

### パラメータを積算する
```
<AOP Param x Rate: y>
<AOP 'code' Rate: y>
```
装備中、またはステート付加中、パラメータ x (または'code')を、y 倍します。
y に負の数字を入れた場合、正の数と見なして積算します。

### パラメータの加算と積算の計算優先度

アクターおよびクラスのパラメータに対して、Plusタグの値を加算した後に、Rateタグの値で積算します。

## エネミーの設定

エネミーのメモ欄に以下のタグを入力することで、エネミーにパラメータを設定できます。
```
<AOP Param x Value: y>
<AOP 'code' Value: y>
```
対象のエネミーのパラメータ x (または'code')を、y に設定します。

[目次に戻る](#目次)

## パラメータの現在値の増減

アイテムおよびスキルのメモ欄に以下のタグを入力することで、パラメータの現在値を増減できます。

```
<AOP Param x Get: y(%)>
<AOP 'code' Get: y(%)>
```
アイテムまたはスキルを使用すると、対象者のパラメータ x (または'code')の現在値に y 加算します。
y に負の数字を入れた場合、減算します。<br>
y に'%'を付けた場合、パラメータ x (または'code')の最大値の y% 分加算します。

入力例) Param 0 の code を str として、最大値が 100 、現在値が 60 の場合
```
<AOP str Get: 5>
```
パラメータ 0 (str)の現在値に 5 加算します。現在値は 65 になります。

```
<AOP str Get: 50%>
```
パラメータ 0 (str)の最大値 100 の 50%分を、現在値に加算します。現在値は 100 (最大値)になります。

[目次に戻る](#目次)

## オリジナルパラメータの用途

### ダメージ計算式

オリジナルパラメータは、ダメージ計算式に使用できます。
使用する場合、ダメージ計算式には、プラグインパラメータで設定した'code'を記載してください。

例) パラメータ0 の code を str とした場合、以下のように書きます。
```
(a.atk + a.str) * 4 - b.def * 2
```

### 装備条件

オリジナルパラメータは、装備条件に使用できます。
武器、防具のメモ欄に以下のタグを入力することで、装備するために必要な条件を設定できます。

```
<AOP Param x Require: y>
<AOP 'code' Require: y>
```
パラメータ x が、y 以上ないと、装備することができなくなります。

[目次に戻る](#目次)

## スクリプトコマンド

以下のスクリプトを使用できます。

なお、パーティーメンバーを指定したい場合は、`$gameActors.actor(x)`を`$gameParty.members()[n]`に変えてください。
バトル中の敵メンバーの場合は、`$gameTroop.members()[n]`に変えてください。
n はパーティーの先頭を 0番とした番号です。

### パラメータの取得
```
$gameActors.actor(x).aopParam(y)
$gameActors.actor(x).code
```
アクターID x の パラメータ y (または'code')の値を取得します。
'code'は、プラグインパラメータで設定したコード名です。

取得した値は、$gameVariables.setValue()等を使って利用してください。

### パラメータの現在値の代入
```
$gameActors.actor(x).setCAop(y, value)
```
アクターID x の パラメータ y の現在値に value を代入します。
このスクリプトには、'code'は使用できません。

### パラメータの現在値の加算
```
$gameActors.actor(x).gainCAop(y, value)
```
アクターID x の パラメータ y の現在値に value を加算します。
value が負の値ならば、減算します。
このスクリプトには、'code'は使用できません。

[目次に戻る](#目次)

## プラグインコマンド

以下のプラグインコマンドを使用できます。

### パラメータ(最大値)の取得
```
AOP_パラメータ取得 ゲーム内変数ID アクター(x) コード名
または
AOP_パラメータ取得 ゲーム内変数ID パーティー(n) コード名
```
アクター x の パラメータ(コード) の値を取得します。
または、先頭を n = 0 としたパーティーの並び順で指定したキャラのパラメータを取得します。
コード名は、プラグインパラメータで設定したコード名です。

入力例
```
AOP_パラメータ取得 5 アクター(1) str
```
ゲーム内変数ID 5 にアクターID 1 の str を代入する

### パラメータ(最大値)の変更
```
AOP_パラメータ変更 アクター(x) コード名 演算方法 数値
または
AOP_パラメータ変更 パーティー(n) コード名 演算方法 数値
```
アクター x または、先頭を n = 0 としたパーティーの並び順で指定したキャラの パラメータ(コード)を 数値と演算方法に従って変更します。
演算方法には以下の文字を代入してください。
* 代入 または =
* 加算 または +
* 減算 または -
* 積算 または *
* 除算 または /
* 剰余 または %
コード名は、プラグインパラメータで設定したコード名です。

入力例
```
AOP_パラメータ変更 アクター(1) str 代入 v[5]
```
アクターID 1 の str にゲーム内変数ID 5 の値を 代入 する

[目次に戻る](#目次)

## プラグインの更新履歴

| バージョン | 公開日 | 更新内容 |
| --- | --- | --- |
| [ver1.2.1](FTKR_AddOriginalParameters.js) | 2018/10/16 | オリジナルパラメータの入力ミス時のエラー表示機能を追加。(F12) |
| ver1.2.0 | 2018/09/29 | 各コードの表示名を設定する機能を追加 |
| ver1.1.6 | 2017/11/05 |  アイテム等に設定した現在値の減少効果が発生しない不具合を修正 |
| ver1.1.5 | 2017/11/05 | レベルアップやプラグインコマンドによるパラメータの増減がセーブデータに記録されない不具合を修正<br>プラグインコマンドに、パーティーの並び順を指定できる機能を追加 |
| ver1.1.4 | 2017/04/30 | 現在値を回復させるアイテムが最大値の状態でも使用可能な不具合を修正 |
| ver1.1.3 | 2017/04/25 | ステートのパラメータ変更設定が反映されない不具合修正 |
| ver1.1.2 | 2017/04/14 | プラグインコマンド追加 |
| ver1.1.1 | 2017/03/23 | 不具合修正 |
| ver1.0.0 | 2017/02/16 | 初版公開 |

## 拡張プラグイン

以下のプラグインを使用することで、本プラグインの機能を拡張できます。

* [FTKR_CustomSimpleActorStatus](FTKR_CustomSimpleActorStatus.ja.md) - 本プラグインで設定したオリジナルパラメータをアクターのステータス画面に表示できます

## ライセンス

本プラグインはMITライセンスのもとで公開しています。

[The MIT License (MIT)](https://opensource.org/licenses/mit-license.php)

#
[目次に戻る](#目次)

[トップページに戻る](README.md)